<!doctype html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Improving UX for images while they’re loading on the web</title>

  

  

  <!-- https://www.zachleat.com/web/preload/ -->
  <link rel="preload" href="/fonts/goudybookletter1911.woff2" as="font" type="font/woff2" crossorigin />

  <link rel="stylesheet" href="/css/color.css" />
  <link rel="stylesheet" href="/css/type.css" />
  <link rel="stylesheet" href="/css/elements.css" />
  <link rel="stylesheet" href="/css/button.css" />
  <link rel="stylesheet" href="/css/nav.css" />
  <link rel="stylesheet" href="/css/layout.css" />
  <link rel="stylesheet" href="/css/project-list-item.css" />
  <link rel="stylesheet" href="/css/project-header.css" />
  <link rel="stylesheet" href="/css/project-next.css" />
  <link rel="stylesheet" href="/css/home.css" />
  <link rel="stylesheet" href="/css/sky.css" />
  <link rel="stylesheet" href="/css/highlight-code/jwarby-jekyll-pygments-themes/github.css" />
  <link rel="stylesheet" href="/css/highlight-code/jwarby-jekyll-pygments-themes/native.css" media="(prefers-color-scheme: dark)" />

  <script>
    (function() {

    // Generate a random number between 1 and 1000
    function getRandomDelay() {

      // KUDOS https://stackoverflow.com/questions/4959975/generate-random-number-between-two-numbers-in-javascript#answer-4960020
      return Math.floor(Math.random() * 1000) + 1;
    }

    document.documentElement.style.setProperty('--cloud-delay-one',   getRandomDelay() + 's');
    document.documentElement.style.setProperty('--cloud-delay-two',   getRandomDelay() + 's');
    document.documentElement.style.setProperty('--cloud-delay-three', getRandomDelay() + 's');
    document.documentElement.style.setProperty('--cloud-delay-four',  getRandomDelay() + 's');
    document.documentElement.style.setProperty('--cloud-delay-five',  getRandomDelay() + 's');
    
    document.documentElement.style.setProperty('--sun-delay',  getRandomDelay() + 's');

    function updateTheme() {

      // KUDOS: https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia
      if (matchMedia('(prefers-color-scheme: dark)').matches) {
        document.documentElement.classList.add('night');
      } else if (matchMedia('(prefers-color-scheme: light)').matches) {
        document.documentElement.classList.remove('night');
      }
    }

    function updateTime() {
      let now = new Date();
      let hours = now.getHours() + (now.getMinutes() / 60);

      let hasNoColorSchemePreference = true;

      // If dark mode is supported
      // https://web.dev/prefers-color-scheme/
      if (matchMedia('(prefers-color-scheme)').media !== 'not all') {

        // If the user has selected light or dark
        if (matchMedia('(prefers-color-scheme: light)').matches ||
            matchMedia('(prefers-color-scheme: dark)').matches) {
          hasNoColorSchemePreference = false;
        }
      }

      // If the user hasn’t chosen dark or light mode
      if (hasNoColorSchemePreference) {

        // Choose a theme based on the time of day
        if (hours >= 18 || hours < 6) {
          document.documentElement.classList.add('night');
        } else {
          document.documentElement.classList.remove('night');
        }
      }

      if (hours < 6) {
        hours = hours + 6;
      } else {
        hours = hours - 6;
      }

      let sunPosition = (hours % 12) * 60 * 60; // The animation only supports 0-12 hours, at present
                                                // Adjust by six hours, so the sun will be half-way through
                                                // the animation (instead of at the very end) at noon.

      document.documentElement.style.setProperty('--sun-position', sunPosition);

      let sixHours = 6 * 60 * 60; // 21600 seconds
      let sunVerticalRange = 4.5; // The sun can move up or down, within the range from zero through 4.5em

      if (sunPosition >= sixHours) {
        document.documentElement.style.setProperty('--sun-position-vertical', ((sunPosition / sixHours * sunVerticalRange) - sunVerticalRange) + 'em');
      } else {
        document.documentElement.style.setProperty('--sun-position-vertical', (sunVerticalRange - (sunPosition / sixHours * sunVerticalRange)) + 'em');
      }
    }

    setInterval(updateTime, 60 * 1000); // Once per minute
    updateTime();
    
    matchMedia('(prefers-color-scheme: dark)').addListener(updateTheme);
    updateTheme();
  })();

  (function() {

    // EXPERIMENTAL: These properties have only been tested in WebKit on iOS

    function _onOrientationChange(e) {
      const ALPHA = e.alpha;
      const BETA  = e.beta;
      const GAMMA = e.gamma;

      // To avoid changing the animation direction too often
      const THRESHOLD = 25

      // You can test these properties by holding your device
      // above you and facing the screen toward you
      const PORTRAIT_FACING_DOWN  = (BETA > 90);
      // const LANDSCAPE_FACING_DOWN = (GAMMA < 0);

      // You can test this property tilting your device until it’s in landscape
      // mode, positioning the top of the device so it’s on the right–
      // and then repositioning the top of the device so it’s on the left
      // const DEVICE_IS_LANDSCAPE_AND_RESTING_ON_SIDE_A = (ALPHA > 180);

      function getGamma(value) {
        if (PORTRAIT_FACING_DOWN) value = value * -1;
        return value;
      }
      // function getBeta(value) {
      //   if (DEVICE_IS_LANDSCAPE_AND_RESTING_ON_SIDE_A && LANDSCAPE_FACING_DOWN) value = value * -1;
      //   return value;
      // }

      // Portrait orientation
      
      // Tilted right
      if (GAMMA > THRESHOLD) {
        document.documentElement.style.setProperty('--device-gamma', getGamma(1));
        
      // Tilted left
      } else if (GAMMA < THRESHOLD * -1) {
        document.documentElement.style.setProperty('--device-gamma', getGamma(-1));

      // Neutral
      } else {
        document.documentElement.style.setProperty('--device-gamma', 0);
      }

      /*
      // Landscape orientation
      
      // Tilted right
      if (BETA > THRESHOLD) {
        document.documentElement.style.setProperty('--device-beta', getBeta(1));
      
      // Tilted left
      } else if (BETA < THRESHOLD * -1) {
        document.documentElement.style.setProperty('--device-beta', getBeta(-1));
      
      // Neutral
      } else {
        document.documentElement.style.setProperty('--device-beta', 0);
      }
      */

      throttle = undefined;


      // document.getElementById("alpha").innerHTML = Math.round(ALPHA);
      // document.getElementById("beta").innerHTML  = Math.round(BETA);
      // document.getElementById("gamma").innerHTML = Math.round(GAMMA);
      /* For debugging
      
      <p>alpha: <span id="alpha"></span></p>
      <p>beta: <span id="beta"></span></p>
      <p>gamma: <span id="gamma"></span></p>

      document.getElementById("alpha").innerHTML = Math.round(ALPHA);
      document.getElementById("beta").innerHTML  = Math.round(BETA);
      document.getElementById("gamma").innerHTML = Math.round(GAMMA);
      
      */
    };


    // Wait for the orientation to be stable and then respond
    const WAIT_UNTIL_SECONDS = 1/10;
    let throttle = undefined;
    function onOrientationChange(e) {
      if (throttle !== undefined) return;
      throttle = setTimeout(function() {
        _onOrientationChange(e);
      }, WAIT_UNTIL_SECONDS * 1000);
    }

    window.addEventListener("deviceorientation", onOrientationChange, false);
    
  })();

  </script>

  <!-- for Windows 8 -->
  <meta name="msapplication-TileImage" content="/images/ship.png" />
  <meta name="msapplication-TileColor" content="rgb(240, 240, 240)" />

  <!-- for general use -->
  <link rel="icon" type="image/png"    href="/images/anchor.png" />

  <!-- for iOS -->
  <link rel="apple-touch-icon"         href="/images/ship-240-240-240.png" />

</head>
<body >

  <a href="/" class="ahoy">
  <svg width="100" height="76" viewBox="0 0 100 75.985">
  <path d="M99.73,47.119c-3.52,2.241-7.691,5.886-12.512,10.938S78.244,68.16,74.758,73.209c-5.656,1.853-14.121,2.776-25.397,2.776c-11.1,0-20.154-0.57-27.161-1.708c-0.854-2.632-2.171-5.619-3.949-8.966l-9.925-4.586c-0.213-0.109-0.32-0.338-0.32-0.694c0-0.498,0.15-0.979,0.453-1.442c0.302-0.463,0.685-0.674,1.147-0.64l1.281,0.536c0.248,0.139,0.516,0.211,0.801,0.211c1.494,0,3.059-1.323,4.695-3.975c1.636-2.652,2.614-5.523,2.934-8.618c-0.854,0.072-1.779,0.604-2.775,1.601c-1.21,1.21-2.384,1.812-3.521,1.812l-0.427-0.053c-0.32-0.104-0.676-0.159-1.067-0.159c-1.459,0-3.185,0.962-5.176,2.881c-1.53,1.425-2.687,2.137-3.468,2.137c-0.32,0-0.632-0.215-0.934-0.643c-0.303-0.426-0.453-0.816-0.453-1.173l0.213-0.747c0.427-1.068,0.64-1.957,0.64-2.666c0-1.245-0.356-2.866-1.066-4.858c-0.285-0.854-0.427-1.406-0.427-1.655c0-0.426,0.15-0.834,0.455-1.228c0.301-0.39,0.578-0.585,0.826-0.585l0.586,0.159c0.356,0.107,0.659,0.159,0.908,0.159c1.067,0,2.277-0.336,3.629-1.012c1.281-0.676,2.419-1.015,3.415-1.015c1.103,0,2.383-0.534,3.842-1.601c0.889-0.64,1.601-1.067,2.135-1.281c-0.783-0.889-1.743-1.6-2.882-2.134c-0.178-0.071-0.267-0.231-0.267-0.48c0-0.391,0.178-0.81,0.534-1.254c0.354-0.444,0.764-0.667,1.228-0.667l0.373,0.107c5.62,3.878,10.618,6.208,14.994,6.99c0.641-1.494,0.961-3.309,0.961-5.443c0-2.597-0.542-4.846-1.627-6.75c-1.085-1.904-2.465-2.98-4.135-3.229c-0.463,0-0.695-0.427-0.695-1.28c0-0.427,0.116-0.809,0.347-1.148c0.231-0.337,0.488-0.506,0.773-0.506c1.21,0.249,3.629,0.374,7.258,0.374c1.494,0,2.632-0.035,3.415-0.107v-4.588h-5.762c-0.569,0-0.854-0.498-0.854-1.494c0-0.996,0.285-1.495,0.854-1.495c0.889,0,1.663-0.204,2.322-0.614c0.657-0.408,1.805-1.378,3.44-2.908V3.895c-1.139,0.142-2.88,0.249-5.228,0.32c-4.27,0.178-6.404,0.676-6.404,1.494c0,0.463,0.23,1.066,0.693,1.815c0.534,0.889,0.8,1.672,0.8,2.348c0,1.174-0.302,2.08-0.908,2.721c-0.605,0.64-1.903,1.138-3.895,1.494c-1.886,0.356-3.193,0.801-3.921,1.333c-0.729,0.534-1.236,1.281-1.521,2.242c-0.391,1.387-1.29,2.5-2.693,3.335c-1.407,0.835-3.034,1.253-4.883,1.253c-2.598,0-4.946,1.157-7.043,3.468L1.547,25.88c-0.32,0-0.659-0.214-1.013-0.641C0.178,24.812,0,24.367,0,23.905c0-0.712,1.032-1.734,3.096-3.068c2.063-1.335,4.018-2,5.87-2c1.458,0,2.499-0.249,3.121-0.747c0.622-0.498,1.147-1.298,1.575-2.401c0.462-1.245,1.181-2.206,2.161-2.882c0.977-0.676,2.569-1.155,4.775-1.44c1.848-0.249,2.775-0.712,2.775-1.388c0-0.498-0.285-1.138-0.854-1.921c-0.64-0.925-0.961-1.708-0.961-2.348c0-1.316,0.605-2.303,1.815-2.962c1.208-0.657,3.806-1.129,7.791-1.414c3.876-0.248,6.492-0.657,7.844-1.228L39.488,0c0.674,0,0.996,0.444,0.959,1.333c0,0.285,0,1.139,0,2.562v5.656c1.459,1.53,2.517,2.5,3.176,2.908c0.657,0.41,1.432,0.614,2.321,0.614c0.568,0,0.854,0.5,0.854,1.495c0,0.996-0.285,1.494-0.854,1.494h-5.497v4.481c3.112-0.248,5.092-0.604,5.941-1.067c0.212-0.107,0.424-0.161,0.637-0.161c0.812,0,1.219,0.374,1.219,1.122c0,0.178,0.32,1.174,0.957,2.987c0.246-0.354,0.493-0.534,0.741-0.534c1.697,0.285,4.102,0.427,7.214,0.427h0.955v-4.376h-5.017c-0.57,0-0.854-0.497-0.854-1.494c0-1.067,0.284-1.601,0.854-1.601c0.819,0,1.511-0.221,2.081-0.667c0.568-0.444,1.547-1.396,2.936-2.854V7.203c0-0.569,0.568-0.854,1.709-0.854c1.135,0,1.708,0.285,1.708,0.854v5.123c1.456,1.459,2.478,2.41,3.065,2.854c0.588,0.446,1.271,0.667,2.056,0.667c0.567,0,0.854,0.534,0.854,1.601c0,0.997-0.286,1.494-0.854,1.494h-5.121v4.27c3.696-0.249,6.079-0.658,7.147-1.228c0.214-0.107,0.426-0.16,0.64-0.16c0.857,0,1.28,0.356,1.28,1.066c0,0.393,0.145,0.927,0.428,1.601c0-0.32,0.231-0.631,0.695-0.934c0.463-0.301,0.851-0.453,1.175-0.453c0.354,0,0.62,0.142,0.8,0.427c1.922,2.846,5.077,6.75,9.472,11.712c4.392,4.963,8.17,8.939,11.337,11.927c2.386-1.777,3.7-2.669,3.949-2.669c0.356,0,0.7,0.231,1.042,0.695C99.829,45.66,100,46.104,100,46.528C100,46.815,99.91,47.009,99.73,47.119z M35.22,44.288c-1.354,0.072-3.148,0.214-5.391,0.429c-1.494,0.142-2.401,0.214-2.722,0.214c-0.569,0-0.854-0.498-0.854-1.494c0-0.819,0.285-1.317,0.854-1.493l0.48-0.27l0.267-0.107c-0.996-0.104-2.953-0.87-5.87-2.293c0.641,1.602,0.961,3.202,0.961,4.8c0,2.919-0.836,6.138-2.508,9.661s-3.397,5.816-5.175,6.882c3.095,1.459,6.029,2.188,8.804,2.188c3.629,0,6.563-1.173,8.805-3.521c2.241-2.348,3.361-5.355,3.361-9.018C36.232,48.31,35.894,46.317,35.22,44.288z M45.411,23.212c-2.313,0.64-6.279,0.96-11.9,0.96H32.55c1.637,2.277,2.455,5.318,2.455,9.125c0,3.487-0.676,6.048-2.028,7.684c4.483,0,7.96-0.906,10.432-2.722c2.473-1.813,3.709-4.375,3.709-7.683C47.118,28.37,46.549,25.915,45.411,23.212z M44.984,65.101l-3.362-13.98v1.014c0,5.477-1.353,9.692-4.055,12.646L44.984,65.101z M55.124,46.85l-4.377,0.641c-0.569,0-0.854-0.533-0.854-1.599c0-0.747,0.303-1.228,0.908-1.441c0.854-0.321,1.619-0.837,2.294-1.549H50c-0.569,0.501-1.246,0.961-2.028,1.387c-1.994-0.139-3.789-0.215-5.389-0.215l5.923,21.134h1.601L55.124,46.85z M55.229,35.857c0-2.453-0.469-4.597-1.413-6.43c-0.943-1.831-2.18-2.961-3.708-3.389c1.565,3.985,2.348,7.08,2.348,9.286c0,1.779-0.144,3.131-0.427,4.055h2.882C55.124,38.42,55.229,37.246,55.229,35.857z M58.111,64.993V45.996l-4.695,19.211L58.111,64.993z M67.822,25.719c-2.346,0.64-5.906,0.961-10.672,0.961h-0.961c1.636,2.313,2.455,5.372,2.455,9.177c0,3.487-0.678,6.051-2.026,7.684c8.645,0,12.964-3.308,12.964-9.924C69.582,31.269,68.997,28.638,67.822,25.719z M66.113,64.46l-4.585-18.464v18.89L66.113,64.46z M72.625,60.83c0-4.517-1.92-9.461-5.765-14.834c-0.425-0.069-1.245-0.104-2.455-0.104l5.018,18.141l2.88-0.426C72.518,62.753,72.625,61.826,72.625,60.83z M82.23,56.241c-0.215-3.271-2.365-9.729-6.459-19.369c-0.852-2.028-1.477-3.539-1.864-4.536c0.637,2.455,0.961,4.305,0.961,5.55c0,2.099-0.27,3.788-0.802,5.07c-0.535,1.279-1.477,2.4-2.828,3.361C76.432,50.018,80.097,53.326,82.23,56.241z M77.32,56.456c0-0.962-1.279-2.667-3.842-5.121c1.104,2.523,1.708,4.979,1.815,7.361C76.646,57.915,77.32,57.168,77.32,56.456z M82.123,59.443c-0.604-0.356-1.279-0.532-2.026-0.532c-2.137,0-3.914,1.421-5.339,4.27l4.91-0.961L82.123,59.443z M87.885,47.918c0-2.918-2.704-6.76-8.109-11.526c3.627,8.539,5.619,13.732,5.979,15.58C87.175,50.871,87.885,49.517,87.885,47.918z"></path>
</svg>
  <h2>Ahoy there! <span>I’m Jim</span>.</h2>
</a>


  <div class="project-header" style="background-image: url(/images/writing/2019-12-06-improving-ux-for-images-while-loading-on-the-web/2048-wide/wildflowers.jpg);">
    <div class="project-header__container">
      <h1 class="project-header__title">Improving UX for images while they’re loading on the web</h1>
      <p class="project-header__company">Posted on December 6, 2019</p>
    </div>
  </div>

  <div class="container">

    <p>This post is about a few different ways that you can improve the experience someone has while they’re waiting for the images to load on your web site or application.</p>

<p>You can see a demo of these techniques by switching on <a href="https://developer.mozilla.org/en-US/docs/Tools/Network_Monitor/Throttling">network throttling</a> in the developer tools for Firefox or Chrome, and then visiting this wildflower picture gallery:</p>

<p><a href="https://pictures.tobbi.co/wildflowers/">Wildflowers of Joshua Tree (demo)</a></p>

<figure>
  <p><a href="https://pictures.tobbi.co/wildflowers/51-mastodon-peak/"><img src="https://tobbi.co/images/writing/2019-12-06-improving-ux-for-images-while-loading-on-the-web/2048-wide/network-throttle.png" alt="Network throttling in the developer tools for Firefox" /></a></p>
</figure>

<p>There are five ideas suggested here, but don’t feel like you have to use all of them! Some will be way more useful in certain contexts (especially <em>lazy loading</em>), and implementing even just one can make a big difference. In general, these techniques are useful for large images, long lists of images, and images that affect the layout of a web page.</p>

<ol>
  <li><a href="#lazy-loading">Loading images lazily</a></li>
  <li><a href="#intrinsic-sizing">Giving images an intrinsic size</a></li>
  <li><a href="#responsive-images">Making a variety of image sizes available for differently sized screens</a></li>
  <li><a href="#image-preview">Showing a preview of each image</a></li>
  <li><a href="#image-description">Making image descriptions available</a></li>
</ol>

<h2 id="lazy-loading">Loading images lazily</h2>

<p>This technique involves only loading images if they’re within the viewport or likely to be within the viewport the next time the user scrolls up or down. It’s super useful when applied to a list of images, where only a few are visible at a time.</p>

<p>This should make the first few images a user is looking at load more quickly–particularly on a slow connection. It may also save bandwidth and some dollars for users of your web product.</p>

<p>You can easily begin using the lazy loading technique, now that it’s built into the web platform:</p>

<p><a href="https://css-tricks.com/native-lazy-loading/">Native Lazy Loading on CSS Tricks</a></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;img</span> <span class="na">loading=</span><span class="s">"lazy"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<p>And if it’s not yet implemented in a browser that you feel is important to your audience, you can manually apply the technique by following a guide like this one, from Google:</p>

<p><a href="https://developers.google.com/web/fundamentals/performance/lazy-loading-guidance/images-and-video/">Lazy Loading Images and Video, Web Fundamentals by Google</a></p>

<h2 id="intrinsic-sizing">Giving images an <a href="https://twitter.com/jensimmons/status/980980521848127488">intrinsic</a> size</h2>

<p>This will help browsers to lay out the page completely while the images are still loading, since it will know how wide and tall each image should be. Basically all you have to do is add a <code class="language-plaintext highlighter-rouge">width</code> and <code class="language-plaintext highlighter-rouge">height</code> attribute to each image and the browser will take care of the rest. You can learn more about it with this guide from Mozilla:</p>

<p><a href="https://developer.mozilla.org/en-US/docs/Web/Media/images/aspect_ratio_mapping">Media container elements and aspect-ratio, by Mozilla</a></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;img</span> <span class="na">width=</span><span class="s">"1500"</span> <span class="na">height=</span><span class="s">"1000"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">img</span> <span class="p">{</span>
  <span class="nl">max-width</span><span class="p">:</span> <span class="m">100%</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>

  <span class="c">/* Browsers like Firefox now have a default rule like this one
    (so you don’t have to write this line, but it looks neat!) */</span>
  <span class="py">aspect-ratio</span><span class="p">:</span> <span class="n">attr</span><span class="p">(</span><span class="n">width</span><span class="p">)</span> <span class="p">/</span> <span class="n">attr</span><span class="p">(</span><span class="n">height</span><span class="p">);</span> 
<span class="p">}</span>
</code></pre></div></div>

<p>If you have a lot of images, you can use a tool like <a href="https://www.npmjs.com/package/exif">node-exif</a> to automatically make the image sizes available to you as data.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nl">"exif"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="nl">"ExifImageWidth"</span><span class="p">:</span><span class="w"> </span><span class="mi">1500</span><span class="p">,</span><span class="w">
  </span><span class="nl">"ExifImageHeight"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="responsive-images">Making a variety of image sizes available for differently sized screens</h2>

<p>Similar to lazy loading, this will make images load noticeably faster on slow connections and saves bandwidth for users and servers–and potentially some dollars for your audience and yourself.</p>

<p>You can get started by adding a <code class="language-plaintext highlighter-rouge">srcset</code> attribute to your image element and giving it a few image sizes at different widths. If you want to go further, adding a <code class="language-plaintext highlighter-rouge">sizes</code> attribute can make a big difference in download size too.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;img</span>
  <span class="na">src=</span><span class="s">"
    /images/500-wide/wildflowers.jpg"</span>
  <span class="na">srcset=</span><span class="s">"
    /images/500-wide/wildflowers.jpg 500w,
    /images/1000-wide/wildflowers.jpg 1000w,
    /images/1500-wide/wildflowers.jpg 1500w"</span>
  <span class="na">sizes=</span><span class="s">"
    (min-width: 35em) 50vw,
    100vw"</span>
<span class="nt">/&gt;</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">srcset</code> attribute above is basically saying to the browser, “Hey! I have three different images for you to choose from, ranging from 500 pixels wide to 1,500 pixels wide. Please choose whichever one is best for your viewport size and device pixel ratio.”</p>

<p>And the <code class="language-plaintext highlighter-rouge">sizes</code> attribute is saying, “I’ve included a CSS layout for this page that makes images either 50 or 100 percent of the viewport width, depending on how wide the viewport is. Please consider this information too when you choose one of the <code class="language-plaintext highlighter-rouge">srcset</code> images. I’m telling you this information now–since you’re awesome and you have a <a href="https://cloudfour.com/thinks/the-real-conflict-behind-picture-and-srcset/">lookahead preparser</a> that needs this information to be stored somewhere in the HTML.”</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">img</span> <span class="p">{</span>
  <span class="nl">width</span><span class="p">:</span> <span class="m">100vw</span><span class="p">;</span>
  <span class="nl">height</span><span class="p">:</span> <span class="nb">auto</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">@media</span> <span class="p">(</span><span class="n">min-width</span><span class="p">:</span> <span class="m">35em</span><span class="p">)</span> <span class="p">{</span>
  <span class="nt">img</span> <span class="p">{</span>
    <span class="nl">width</span><span class="p">:</span> <span class="m">50vw</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Be sure to keep the <code class="language-plaintext highlighter-rouge">src</code> attribute that you already have on the <code class="language-plaintext highlighter-rouge">img</code> element. This will provide a default image for browsers that don’t understand the <code class="language-plaintext highlighter-rouge">srcset</code> syntax. Any size image will be a good choice–even a big one. (Modern browsers will skip the <code class="language-plaintext highlighter-rouge">src</code>image and download a potentially smaller image from the <code class="language-plaintext highlighter-rouge">srcset</code> instead.)</p>

<p>If you have a lot of images, you can use a tool like <a href="https://github.com/topics/graphicsmagick">GraphicsMagick</a> to automatically generate differently sized images. Or you can use a service like <a href="https://www.netlify.com/products/large-media/">Netlify Large Media</a>.</p>

<p>You can learn more in the <a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images">Responsive Images</a> guide from Mozilla or by listening to this <a href="https://thewebahead.net/99">Implementing Responsive Images</a> podcast with Jen Simmons and Jason Grigsby.</p>

<h2 id="image-preview">Showing a preview of each image</h2>

<p>This practice is about making images <em>appear</em> to load faster, by showing a colorful preview of each image while it’s loading.</p>

<p><a href="https://css-tricks.com/the-blur-up-technique-for-loading-background-images/">The “Blur Up” Technique for Loading Background Images on CSS Tricks</a></p>

<p>If you’re already creating differently sized images for use in the <a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images">responsive images</a> technique, you can easily generate one more tiny sized image for use as a preview. I found that a 16 pixel wide image works well–especially after it’s optimized with a tool like <a href="https://imageoptim.com">ImageOptim</a>.</p>

<p>Once you have your tiny images, you can embed them directly in the HTML for your page using <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs">data URLs</a>.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;img</span> <span class="na">class=</span><span class="s">"preview"</span> <span class="na">src=</span><span class="s">" data:image/jpeg;base64,/9j…EKyONpWJGxwSAuDj5qPEXQxv/9k="</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">"/images/wildflowers.jpg"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">img</span><span class="nc">.preview</span> <span class="p">{</span>
  <span class="nl">filter</span><span class="p">:</span> <span class="n">blur</span><span class="p">(</span><span class="m">100px</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<figure>
  <p><img src="https://tobbi.co/images/writing/2019-12-06-improving-ux-for-images-while-loading-on-the-web/2048-wide/image-preview.png" alt="A blurry preview image with a variety of colors" /></p>
</figure>

<figure>
  <p><img src="https://tobbi.co/images/writing/2019-12-06-improving-ux-for-images-while-loading-on-the-web/2048-wide/image-loaded.png" alt="The original image" /></p>
</figure>

<h2 id="image-description">Making image descriptions available</h2>

<p>Most browsers display the description stored in the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Img"><em>alt</em> attribute</a> while the image is loading.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;img</span> <span class="na">alt=</span><span class="s">"A lush group of plants with purple flowers, growing in the sunshine"</span> <span class="nt">/&gt;</span>
</code></pre></div></div>

<figure>
  <p><img src="https://tobbi.co/images/writing/2019-12-06-improving-ux-for-images-while-loading-on-the-web/2048-wide/description.png" alt="Alternate text displayed on top of an image, loading on a web page" /></p>
</figure>

<p>Descriptions are also super important and helpful for people who experience your web product using tools like <a href="http://www.apple.com/accessibility/voiceover/">Voice Over</a>.</p>

<p>If you have a lot of images, you may be able to get a head start writing descriptions by using something like <a href="https://stackoverflow.com/questions/44929055/generate-meaningful-image-description-based-on-image-labels">machine learning</a>. (I haven’t done this before myself, but would really like to try it!)</p>

<h2 id="an-example-project">An example project</h2>

<p>Here’s a project on GitHub that makes use of each of these techniques, that you can use a reference or starting point:</p>

<p><a href="https://github.com/jimthoburn/picture-gallery">Picture Gallery 🖼 ✨ on GitHub</a></p>

<p>The project also contains example code for automatically <a href="https://github.com/jimthoburn/picture-gallery/blob/master/create/images.js">generating images</a> and <a href="https://github.com/jimthoburn/picture-gallery/blob/master/create/albums.js"><em>width</em> and <em>height</em></a> data.</p>

<h2 id="more-tips">More tips</h2>

<p>There are, no doubt, many more ways to improve the user experience while loading images on the web. If you have a tip I didn’t mention or an easier way of accomplishing any of the ideas above, please <a href="https://dev.to/jimthoburn/how-to-improve-ux-for-images-while-they-re-loading-on-the-web-3b12#comments">feel free to comment</a>. 🙂</p>

  
  </div>


</body>
</html>
